"0","#| message: false"
"0",""
"0","# Calculate mean distance to 3 nearest lights out"
"0","# (Do this OUTSIDE of mutate to avoid sf conflicts)"
"0",""
"0","# Get coordinates"
"0","fishnet_coords <- st_coordinates(st_centroid(fishnet))"
"0","lights_coords <- st_coordinates(streetLights_allOut)"
"0",""
"0","# Calculate k nearest neighbors and distances"
"0","nn_result <- get.knnx(lights_coords, fishnet_coords, k = 3)"
"0",""
"0","# Add to fishnet"
"0","fishnet <- fishnet %>%"
"0","  mutate("
"0","    streetLights_allOut.nn = rowMeans(nn_result$nn.dist)"
"0","  )"
"0",""
"0","cat(""✓ Calculated nearest neighbor distances\n"")"
"1","✓ Calculated nearest neighbor distances
"
"0","summary(fishnet$streetLights_allOut.nn)"
"1","     Min. "
"1","  1st Qu. "
"1","   Median "
"1","     Mean "
"1","  3rd Qu. "
"1","     Max. "
"1","
"
"1","   0.9959 "
"1","  38.0172 "
"1","  59.4470 "
"1"," 119.7214 "
"1"," 110.8656 "
"1","1436.3413 "
"1","
"
