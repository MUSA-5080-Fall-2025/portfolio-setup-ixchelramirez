"0",""
"0",""
"0","# Ensure both layers have the same CRS"
"0","bikenetwork <- st_transform(bikenetwork, st_crs(school_buffers_plot))"
"0",""
"0","# --- 1. Intersect bike network with school buffers ---"
"0","# This keeps only the bike segments that fall within 1000 ft of schools"
"0","bike_in_buffers <- st_intersection(bikenetwork, school_buffers_plot)"
"0",""
"0","# --- 2. Map: Crime gradient + bike network inside buffers ---"
"0","ggplot() +"
"0","  # School buffer polygons shaded by number of crimes"
"0","  geom_sf(data = school_buffers_plot, aes(fill = n_crimes), color = NA) +"
"0","  "
"0","  # Bike network segments within buffers (cyan lines)"
"0","  geom_sf("
"0","    data = bike_in_buffers,"
"0","    color = ""cyan3"","
"0","    size = 0.6,"
"0","    alpha = 0.8"
"0","  ) +"
"0","  "
"0","  # Color scale for crime density"
"0","  scale_fill_viridis_c(option = ""inferno"", name = ""Crime Count"") +"
"0","  "
"0","  # Titles and labels"
"0","  labs("
"0","    title = ""Philadelphia School Safety Zones and Bike Network Coverage"","
"0","    subtitle = ""Bike network segments within 1000 ft of schools overlaid on crime density"","
"0","    caption = ""Source: OpenDataPhilly (2025)"""
"0","  ) +"
"0","  "
"0","  # Minimal map style"
"0","  theme_void() +"
"0","  theme("
"0","    legend.position = ""right"","
"0","    plot.title = element_text(face = ""bold"", size = 16),"
"0","    plot.subtitle = element_text(size = 12)"
"0","  )"
