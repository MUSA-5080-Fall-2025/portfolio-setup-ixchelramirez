"0","# Get demographic data from ACS"
"0",""
"0","pa_vars <- c("
"0","  total_pop = ""B01001_001"",    # Total population"
"0","  med_income = ""B19013_001"",   # Median household income"
"0","  male_65_66 = ""B01001_020"","
"0","  male_67_69 = ""B01001_021"","
"0","  male_70_74 = ""B01001_022"","
"0","  male_75_79 = ""B01001_023"","
"0","  male_80_84 = ""B01001_024"","
"0","  male_85plus = ""B01001_025"","
"0","  female_65_66 = ""B01001_044"","
"0","  female_67_69 = ""B01001_045"","
"0","  female_70_74 = ""B01001_046"","
"0","  female_75_79 = ""B01001_047"","
"0","  female_80_84 = ""B01001_048"","
"0","  female_85plus = ""B01001_049"""
"0",")"
"0",""
"0","pa_tracts_raw <- get_acs("
"0","  geography = ""tract"","
"0","  state = ""PA"","
"0","  variables = pa_vars,"
"0","  year = 2022,"
"0","  geometry = TRUE"
"0",")"
"1","  |                                                                                    "
"1","  |                                                                              |   0%"
"1","  |                                                                                    "
"1","  |====                                                                          |   5%"
"1","  |                                                                                    "
"1","  |========                                                                      |  10%"
"1","  |                                                                                    "
"1","  |============                                                                  |  16%"
"1","  |                                                                                    "
"1","  |================                                                              |  21%"
"1","  |                                                                                    "
"1","  |====================                                                          |  25%"
"1","  |                                                                                    "
"1","  |========================                                                      |  31%"
"1","  |                                                                                    "
"1","  |================================================                              |  62%"
"1","  |                                                                                    "
"1","  |=====================================================                         |  68%"
"1","  |                                                                                    "
"1","  |=========================================================                     |  73%"
"1","  |                                                                                    "
"1","  |============================================================                  |  77%"
"1","  |                                                                                    "
"1","  |=====================================================================         |  88%"
"1","  |                                                                                    "
"1","  |============================================================================= |  99%"
"1","  |                                                                                    "
"1","  |==============================================================================| 100%"
"1","
"
"0","pa_tracts <- pa_tracts_raw %>%"
"0","  select(GEOID, variable, estimate, geometry) %>%"
"0","  pivot_wider(names_from = variable, values_from = estimate) %>%"
"0","  mutate("
"0","    pop_65plus = male_65_66 + male_67_69 + male_70_74 + male_75_79 + male_80_84 + male_85plus +"
"0","                 female_65_66 + female_67_69 + female_70_74 + female_75_79 + female_80_84 + female_85plus,"
"0","    pct_65plus = 100 * pop_65plus / total_pop"
"0","  ) %>%"
"0","  st_as_sf()"
"0",""
"0",""
"0","glimpse(pa_tracts)"
"1","Rows: 3,446"
"1",""
"1","
"
"1","Columns: 18"
"1",""
"1","
"
"1","$ GEOID         [3m[38;5;246m<chr>[39m[23m ""42001031101"", ""42013100400"", ""42013100300"", ""42013100800"", ""420â€¦
$ geometry      [3m[38;5;246m<MULTIPOLYGON [Â°]>[39m[23m MULTIPOLYGON (((-77.03108 3..., MULTIPOLYGON (((-78â€¦
$ total_pop     [3m[38;5;246m<dbl>[39m[23m 5070, 1589, 2873, 1860, 4816, 3464, 6459, 2981, 3997, 3496, 5463â€¦
$ male_65_66    [3m[38;5;246m<dbl>[39m[23m 56, 24, 0, 27, 15, 12, 81, 8, 0, 63, 74, 75, 36, 66, 60, 119, 19â€¦
$ male_67_69    [3m[38;5;246m<dbl>[39m[23m 145, 52, 48, 24, 22, 70, 81, 41, 29, 39, 75, 91, 22, 94, 113, 66â€¦
$ male_70_74    [3m[38;5;246m<dbl>[39m[23m 68, 24, 55, 27, 283, 59, 331, 89, 33, 12, 237, 119, 20, 21, 121,â€¦
$ male_75_79    [3m[38;5;246m<dbl>[39m[23m 60, 28, 7, 25, 110, 17, 144, 75, 37, 23, 17, 57, 50, 60, 62, 31,â€¦
$ male_80_84    [3m[38;5;246m<dbl>[39m[23m 57, 0, 0, 10, 34, 7, 82, 32, 20, 0, 0, 91, 20, 18, 11, 34, 77, 2â€¦
$ male_85plus   [3m[38;5;246m<dbl>[39m[23m 52, 0, 8, 5, 0, 28, 178, 10, 0, 0, 17, 280, 114, 10, 12, 26, 14,â€¦
$ female_65_66  [3m[38;5;246m<dbl>[39m[23m 43, 0, 41, 27, 10, 51, 69, 26, 0, 75, 102, 48, 5, 55, 52, 42, 82â€¦
$ female_67_69  [3m[38;5;246m<dbl>[39m[23m 141, 45, 51, 28, 17, 27, 314, 71, 64, 16, 109, 28, 37, 64, 148, â€¦
$ female_70_74  [3m[38;5;246m<dbl>[39m[23m 155, 19, 112, 20, 190, 160, 292, 96, 57, 3, 114, 270, 40, 47, 11â€¦
$ female_75_79  [3m[38;5;246m<dbl>[39m[23m 48, 20, 32, 38, 56, 43, 106, 32, 67, 91, 121, 131, 102, 84, 45, â€¦
$ female_80_84  [3m[38;5;246m<dbl>[39m[23m 62, 15, 15, 10, 0, 54, 185, 73, 0, 14, 0, 264, 49, 27, 127, 35, â€¦
$ female_85plus [3m[38;5;246m<dbl>[39m[23m 59, 11, 13, 41, 67, 77, 78, 6, 134, 6, 64, 204, 99, 8, 10, 26, 3â€¦
$ med_income    [3m[38;5;246m<dbl>[39m[23m 61847, 67120, 47091, 64583, 21631, 60750, 90603, 97333, 51979, 3â€¦
$ pop_65plus    [3m[38;5;246m<dbl>[39m[23m 946, 238, 382, 282, 804, 605, 1941, 559, 441, 342, 930, 1658, 59â€¦
$ pct_65plus    [3m[38;5;246m<dbl>[39m[23m 18.658777, 14.977974, 13.296206, 15.161290, 16.694352, 17.465358â€¦"
"1",""
"1","
"
"0","summary(pa_tracts$med_income)"
"1","   Min. "
"1","1st Qu. "
"1"," Median "
"1","   Mean "
"1","3rd Qu. "
"1","   Max. "
"1","   NA's "
"1","
"
"1","  11558 "
"1","  55924 "
"1","  70188 "
"1","  77527 "
"1","  93287 "
"1"," 250001 "
"1","     63 "
"1","
"
"0","summary(pa_tracts$pct_65plus)"
"1","   Min. "
"1","1st Qu. "
"1"," Median "
"1","   Mean "
"1","3rd Qu. "
"1","   Max. "
"1","   NA's "
"1","
"
"1","   0.00 "
"1","  14.26 "
"1","  18.95 "
"1","  19.03 "
"1","  23.11 "
"1"," 100.00 "
"1","     32 "
"1","
"
"0","# Join to tract boundaries"
"0",""
"0",""
"0","sum(is.na(pa_tracts$med_income))"
"1","[1]"
"1"," 63"
"1","
"
"0","median(pa_tracts$med_income, na.rm = TRUE)"
"1","[1]"
"1"," 70188"
"1","
"
