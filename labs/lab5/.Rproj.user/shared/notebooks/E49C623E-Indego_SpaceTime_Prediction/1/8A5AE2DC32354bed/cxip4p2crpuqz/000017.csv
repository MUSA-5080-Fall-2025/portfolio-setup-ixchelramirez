"0","school_parcel <- st_read(here(""data/Schools_Parcels.geojson"")) %>%"
"0","  st_transform(26918)   # project to PA South (meters)"
"1","Reading layer `"
"1","Schools_Parcels"
"1","' from data source "
"1","
"
"1","  "
"1","`"
"1","C:\Users\ixche\Desktop\PPA\Working Files\lab5\data\Schools_Parcels.geojson"
"1","' "
"1","
"
"1","  "
"1","using driver `"
"1","GeoJSON"
"1","'"
"1","
"
"1","Simple feature collection with 496 features and 17 fields"
"1","
"
"1","Geometry type: MULTIPOLYGON
"
"1","Dimension:     XY
"
"1","Bounding box:  "
"1","xmin: -75.2683 ymin: 39.90632 xmax: -74.96983 ymax: 40.13029"
"1","
"
"1","Geodetic CRS:  WGS 84
"
"0","stations_sf <- study_panel %>%"
"0","  distinct(start_station, start_lat.y, start_lon.y) %>%"
"0","  st_as_sf(coords = c(""start_lon.y"", ""start_lat.y""), crs = 4326) %>%"
"0","  st_transform(26918)  # project to meters"
"0",""
"0","# Compute distance matrix (station â†’ school)"
"0","dist_matrix <- st_distance(stations_sf, school_parcel)"
"0",""
"0","# For each station, find nearest school"
"0","nearest_school_dist <- apply(dist_matrix, 1, min)"
"0",""
"0","# Add distances to station dataframe"
"0","stations_sf$dist_to_school <- as.numeric(nearest_school_dist)"
"0",""
"0","study_panel <- study_panel %>%"
"0","  left_join("
"0","    stations_sf %>% st_drop_geometry() %>% "
"0","      select(start_station, dist_to_school),"
"0","    by = ""start_station"""
"0","  )"
"0",""
"0",""
