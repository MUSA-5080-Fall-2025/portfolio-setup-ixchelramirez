"0","test <- test %>%"
"0","  mutate("
"0","    pred_baseline = predict(model2_baseline, newdata = .),"
"0","    pred_with_nonres = predict(model2_with_nonres, newdata = .),"
"0","    "
"0","    abs_error_baseline = abs(Trip_Count - pred_baseline),"
"0","    abs_error_with_nonres = abs(Trip_Count - pred_with_nonres)"
"0","  )"
"0",""
"0","# Overall MAE"
"0","mae_baseline <- mean(test$abs_error_baseline, na.rm = TRUE)"
"0","mae_with_nonres <- mean(test$abs_error_with_nonres, na.rm = TRUE)"
"0",""
"0","cat(""\n=== TEST SET MAE ===\n"")"
"1","
=== TEST SET MAE ===
"
"0","cat(""Baseline:"", round(mae_baseline, 3), ""\n"")"
"1","Baseline:"
"1"," "
"1","0.59"
"1"," "
"1","
"
"0","cat(""With Non-Residential:"", round(mae_with_nonres, 3), ""\n"")"
"1","With Non-Residential:"
"1"," "
"1","0.84"
"1"," "
"1","
"
"0","cat(""Reduction:"", round(mae_baseline - mae_with_nonres, 3), "
"0","    ""("", round(((mae_baseline - mae_with_nonres)/mae_baseline)*100, 1), ""%)\n"", sep = """")"
"1","Reduction:"
"1",""
"1","-0.249"
"1",""
"1","("
"1",""
"1","-42.3"
"1",""
"1","%)
"
"0","# ============================================================================"
"0","# STEP 7: ANALYZE WHERE IT HELPS"
"0","# ============================================================================"
"0",""
"0","# Performance by station type"
"0","station_type_performance <- test %>%"
"0","  group_by(non_residential) %>%"
"0","  summarize("
"0","    n_obs = n(),"
"0","    n_stations = n_distinct(start_station),"
"0","    mae_baseline = mean(abs_error_baseline, na.rm = TRUE),"
"0","    mae_with_feature = mean(abs_error_with_nonres, na.rm = TRUE),"
"0","    improvement = mae_baseline - mae_with_feature,"
"0","    pct_improvement = (improvement / mae_baseline) * 100,"
"0","    .groups = ""drop"""
"0","  ) %>%"
"0","  mutate("
"0","    station_type = ifelse(non_residential == 1, ""Non-Residential"", ""Residential"")"
"0","  )"
"0",""
"0","cat(""\n=== PERFORMANCE BY STATION TYPE ===\n"")"
"1","
=== PERFORMANCE BY STATION TYPE ===
"
"0","print(station_type_performance %>% select(-non_residential))"
