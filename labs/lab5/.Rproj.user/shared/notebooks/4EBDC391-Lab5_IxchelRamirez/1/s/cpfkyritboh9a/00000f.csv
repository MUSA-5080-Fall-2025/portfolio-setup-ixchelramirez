"0","# Split by week"
"0","# Q1 has weeks 1-13 (Jan-Mar)"
"0","# Train on weeks 1-9 (Jan 1 - early March)"
"0","# Test on weeks 10-13 (rest of March)"
"0","# for the spring this is 13-26"
"0","#train on 13-22 "
"0","#Test on 23-26"
"0",""
"0","# Which stations have trips in BOTH early and late periods?"
"0","early_stations <- study_panel_complete %>%"
"0","  filter(week < 23) %>%"
"0","  filter(Trip_Count > 0) %>%"
"0","  distinct(start_station) %>%"
"0","  pull(start_station)"
"0",""
"0","late_stations <- study_panel_complete %>%"
"0","  filter(week >= 23) %>%"
"0","  filter(Trip_Count > 0) %>%"
"0","  distinct(start_station) %>%"
"0","  pull(start_station)"
"0",""
"0","# Keep only stations that appear in BOTH periods"
"0","common_stations <- intersect(early_stations, late_stations)"
"0",""
"0",""
"0","# Filter panel to only common stations"
"0","study_panel_complete <- study_panel_complete %>%"
"0","  filter(start_station %in% common_stations)"
"0",""
"0","# NOW create train/test split"
"0","train <- study_panel_complete %>%"
"0","  filter(week < 23)"
"0",""
"0","test <- study_panel_complete %>%"
"0","  filter(week >= 23)"
"0",""
"0","cat(""Training observations:"", format(nrow(train), big.mark = "",""), ""\n"")"
"1","Training observations:"
"1"," "
"1","498,747"
"1"," "
"1","
"
"0","cat(""Testing observations:"", format(nrow(test), big.mark = "",""), ""\n"")"
"1","Testing observations:"
"1"," "
"1","220,365"
"1"," "
"1","
"
"0","cat(""Training date range:"", min(train$date), ""to"", max(train$date), ""\n"")"
"1","Training date range:"
"1"," "
"1","20179"
"1"," "
"1","to"
"1"," "
"1","20242"
"1"," "
"1","
"
"0","cat(""Testing date range:"", min(test$date), ""to"", max(test$date), ""\n"")"
"1","Testing date range:"
"1"," "
"1","20243"
"1"," "
"1","to"
"1"," "
"1","20269"
"1"," "
"1","
"
